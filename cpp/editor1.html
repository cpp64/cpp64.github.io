<!-- подключение любых библиотек крашит codemirror -->
<html>
   <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <link rel="stylesheet" type="text/css" href="/styles/style.css">
      <link rel="icon" type="image/png" sizes="192x192"  href="/icons/android-icon-192x192.png">
      <title>C++ базовый</title>
      <link rel="stylesheet" href="codemirror/codemirror.css">
      <style>
         .CodeMirror {
            border: 1px inset #dee;
         }
         #codediv {
            position: "absolute";
            width: 400px;
            height: 300px;
            top: 0px;
            left: 0px;
         }
         #area2, #area3 {
            position: "absolute";
            resize: "none";
            top: 0px;
            left: 0px;
         }
         @media only screen and (max-width: 425px) {
            #codediv {
               width: 100%;
               height: 200px;
            }
            #area2, #area3 {
               width: 100%;
               height: 50px;
            }
         }
      </style>
   </head>
   <body>
      <div class="topnav">
         <img class="logo" src="/icons/dove32w2.ico">
         <a href="/index.html">Информатика</a>
         <a href = "/lessons/7kl.html">7 класс</a>
         <a href = "/lessons/8kl.html">8 класс</a>
         <a href = "/lessons/9kl.html">9 класс</a>
         <a href="/oge.html">ОГЭ</a>
         <a href = "/lessons/sgu.html">Студенты</a>
         <img class="wing" src="/icons/wing64(1).png">
      </div>
      <div class="main" id="main" style="position:relative;">
         <!--<div id="text1div"></div>-->
         <div id="codediv" style="position:absolute;"></div>
         <!--<div id="text2div"></div>
         <div id="area2div"></div>
         <div id="text3div"></div>
         <div id="area3div"></div>-->
      </div>
      <script src="codemirror/codemirror.js"></script>
      <script src="codemirror/matchbrackets.js"></script>
      <script src="codemirror/clike.js"></script>
      <script src="JSCPP.es5.min.js"></script>
      <script src="velosiped.js"></script>
      <script type="text/javascript">
         var cppEditor = CodeMirror(
            document.getElementById("codediv"),
            {
                lineNumbers: true,
                matchBrackets: true,
                mode: "text/x-c++src"
            }
         );
         //putTextArea('10px','0px','10','70','area2');
         //putTextArea('10px','0px','10','70','area3');
         putText("0px","0px","Код","text1","main");
         appendBottom("codediv", "text1");
         putText("0px","0px","Вход","text2","main");
         appendBottom1("text2", "codediv", 10);
         putTextAreaWithoutStyle('10','70','area2');
         appendBottom("area2", "text2");
         /*putText("0px","0px","Выход", "text3");
         putTextAreaWithoutStyle('10','70','area3');
         putButton("0px","0px","Запуск","run()","run button");
         putButton("10px","0px","Копировать код","cod()","cod button");
         appendBottom("text3", "area2");
         appendBottom("area3", "text3");
         appendBottom("run button", "area3");
         appendBottom("cod button", "area3");
         alignRight("run button", "area3");*/
         //document.getElementById("codediv").style.width = document.getElementById("2").offsetWidth;
         var precode1 = 
            "#include <cmath>\n" +
            "#include <iostream>\n" +
            "using namespace std;\n" +
            "int main(){\n";
         var precode2 = 
            "#include <cmath>\n" +
            "#include <iostream>\n" +
            "#define or ||\n" +
            "#define and &&\n" +
            "#define bool int\n" +
            "using namespace std;\n" +
            "int main(){\n";
         var postcode = "\nreturn 0;\n}";
         function cod() {
            navigator.clipboard.writeText(precode1 + cppEditor.getValue() + postcode);
         }
         function run() {
             var output = "";
             var config = {stdio:{write:function(s){output += s;}}};
             var code = precode2 + cppEditor.getValue() + postcode;
             var input = document.getElementById("2").value;
             var exitCode;
             try {
                exitCode = JSCPP.run(code, input, config);
                document.getElementById("3").value = output;
             } catch(err) {
                document.getElementById("3").value = "Error: " + (err.message || err);
             }
         }
      </script>
   </body>
</html>
